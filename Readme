README
======

> Passos previos :

- Baixar pacote RPM para OL8 x64 precomp desde site Oracle na versÃ£o 19
 https://www.oracle.com/database/technologies/instant-client/precompiler-downloads.html

https://download.oracle.com/otn_software/linux/instantclient/1928000/oracle-instantclient19.28-precomp-19.28.0.0.0-1.el8.x86_64.rpm

- Copiar pacote RPM no diretorio extra

> gera imagem docker (executa 1 vez)

docker build . -t olinux8-scc

> criar volume persistente scc (executa 1 vez)

docker volume create scc

> executa ambiente docker local (executa cada vez que reinicia terminal)

docker run -ti --privileged --name olinux8 --rm -v sccdata:/usr/src/app olinux8-scc

> copiar projeto no container (executa 1 vez)

docker cp SCC-batch.tgz olinux8:/usr/src/app

> no ambiente docker, executar os comandos para incluir bibliotecas no ldconfig antes de compilar (executa cada vez que reinicia terminal)

export TNS_ADMIN=/usr/src/app/oracle
export ORACLE_HOME=/tools/oracle/19
export LD_LIBRARY_PATH=/tools/oracle/19/lib/
ldconfig
mkdir /COBILLING
mkdir /COBILLING/SCC
mkdir /COBILLING/SCC/INCLUDE/
ln -s /usr/src/app/SCC-batch/biblioteca /COBILLING/SCC/INCLUDE/libClaroSCC

> descompacta projeto

cd /usr/src/app
tar xfz SCC-batch.tgz

> build scc/biblioteca (executa 1 vez)

cd /usr/src/app/SCC-batch/biblioteca/src/
mkdir ../bin
make -f makefile.ol8

> pronto


